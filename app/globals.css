@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --color-border: hsl(240 5.9% 90%);
  --color-input: hsl(240 5.9% 90%);
  --color-ring: hsl(28 10% 10%);
  --color-background: hsl(28 25% 96%);
  --color-foreground: hsl(28 10% 10%);

  --color-primary: hsl(28 10% 10%);
  --color-primary-foreground: hsl(0 0% 98%);

  --color-secondary: hsl(240 4.8% 95.9%);
  --color-secondary-foreground: hsl(28 10% 10%);

  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 98%);

  --color-muted: hsl(240 4.8% 95.9%);
  --color-muted-foreground: hsl(240 3.8% 46.1%);

  --color-accent: hsl(240 4.8% 95.9%);
  --color-accent-foreground: hsl(28 10% 10%);

  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(28 10% 10%);

  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(28 10% 10%);

  --radius: 0.5rem;
  
  /* Animations from tailwind.config.ts */
  --animate-blob: blob 7s infinite;
  --animate-tilt: tilt 10s infinite linear;

  @keyframes tilt {
    0%, 50%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(5deg); }
    75% { transform: rotate(-5deg); }
  }

  @keyframes blob {
    0% { background-color: #fbe2e3; }
    33% { background-color: #dbd7fb; }
    66% { background-color: #eed7f8; }
    100% { background-color: #f8ecd7; }
  }
}

/* Base styles using @layer base */
@layer base {
  :root {
    --background: 28 25% 96%;
    --foreground: 28 10% 10%;
  }
  
  .dark {
    --background: 28 10% 10%;
    --foreground: 60 9.1% 97.8%;
  }

  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
  }
}

/* Dark mode variable overrides tailored for v4 theme system */
/* We use a strategy where we update the CSS variables that Tailwind v4 uses */
@layer utilities {
  .dark {
    --color-background: hsl(28 10% 10%);
    --color-foreground: hsl(60 9.1% 97.8%);

    --color-card: hsl(240 10% 3.9%);
    --color-card-foreground: hsl(0 0% 98%);

    --color-popover: hsl(240 10% 3.9%);
    --color-popover-foreground: hsl(0 0% 98%);

    --color-primary: hsl(0 0% 98%);
    --color-primary-foreground: hsl(240 5.9% 10%);

    --color-secondary: hsl(240 3.7% 15.9%);
    --color-secondary-foreground: hsl(0 0% 98%);

    --color-muted: hsl(240 3.7% 15.9%);
    --color-muted-foreground: hsl(240 5% 64.9%);

    --color-accent: hsl(240 3.7% 15.9%);
    --color-accent-foreground: hsl(0 0% 98%);

    --color-destructive: hsl(0 62.8% 30.6%);
    --color-destructive-foreground: hsl(0 0% 98%);

    --color-border: hsl(240 3.7% 15.9%);
    --color-input: hsl(240 3.7% 15.9%);
    --color-ring: hsl(240 4.9% 83.9%);
  }
}

/* Grid Pattern Utilities (previously defined in tailwind.config.ts plugin, now CSS-based for v4 compatibility) */
.bg-grid-black {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgba(0,0,0,0.08)'%3E%3Cpath d='M0 .5H31.5V32'/%3E%3C/svg%3E");
}

.bg-grid-white {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgba(255,255,255,0.05)'%3E%3Cpath d='M0 .5H31.5V32'/%3E%3C/svg%3E");
}

@layer components {
    .borderBlack {
        @apply border border-black/10;
    }
    
    .container {
        @apply h-[312px] transition-transform duration-300 ease-in-out w-[400px] rounded-[50%] scale-[0.48] after:bg-[#f2f2f2] after:content-[""] after:h-2.5 after:absolute after:w-full after:top-[390px] hover:scale-[0.54];
        -webkit-tap-highlight-color: transparent;
    }

    .container-inner {
        @apply relative origin-[50%] top-[-200px];
        clip-path: path("M 390,400 C 390,504.9341 304.9341,590 200,590 95.065898,590 10,504.9341 10,400 V 10 H 200 390 Z");
    }

    .circle {
        @apply bg-[#fee7d3] cursor-pointer h-[680px] pointer-events-none absolute w-[380px] rounded-[50%] left-2.5 top-[210px];
    }

    .img {
        @apply pointer-events-none relative translate-y-5 origin-[50%_bottom] transition-transform duration-300 ease-in-out scale-[1.15];
    }

    .container:hover .img {
        @apply translate-y-0 scale-[1.2];
    }

    .img1 { @apply w-[340px] left-[22px] top-[164px]; }
    .img2 { @apply left-[-46px] w-[444px] top-[174px]; }
    .img3 { @apply w-[466px] -left-4 top-36; }
    
    .divider {
        @apply bg-[#ca6060] h-px w-40;
    }

    /* Content Visibility Optimization - Vercel Best Practice */
    .content-auto {
        content-visibility: auto;
        contain-intrinsic-size: 1px 500px;
    }

    /* Signature Animation */
    #signature {
        stroke-dasharray: 1099.2;
        stroke-dashoffset: 1099.2;
        animation: sign 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    /* Fade out signature on mobile after animation */
        /* Show initially */
    @media (max-width: 640px) {
        #svg-sign-wrapper {
            animation: fadeOut 1s ease-out forwards;
            animation-delay: 1s; /* Fade out immediately after 1s draw */
        }
    }

    @keyframes sign {
        to {
            stroke-dashoffset: 0;
        }
    }

    @keyframes fadeOut {
        to {
            opacity: 0;
            visibility: hidden;
        }
    }
}

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgb(168 162 158 / 0.4);
  border-radius: 100px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
::-webkit-scrollbar-thumb:hover {
  background: rgb(120 113 108 / 0.6);
  border: 2px solid transparent;
  background-clip: padding-box;
}
.dark ::-webkit-scrollbar-thumb {
  background: rgb(87 83 78 / 0.5);
  border: 2px solid transparent;
  background-clip: padding-box;
}
.dark ::-webkit-scrollbar-thumb:hover {
  background: rgb(120 113 108 / 0.7);
  border: 2px solid transparent;
  background-clip: padding-box;
}

/* Firefox */
* { scrollbar-width: thin; scrollbar-color: rgb(168 162 158 / 0.4) transparent; }
.dark * { scrollbar-color: rgb(87 83 78 / 0.5) transparent; }

.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-auto::-webkit-scrollbar-thumb { background: transparent; }
.scrollbar-auto:hover::-webkit-scrollbar-thumb { background: rgb(168 162 158 / 0.4); }
.dark .scrollbar-auto:hover::-webkit-scrollbar-thumb { background: rgb(87 83 78 / 0.5); }